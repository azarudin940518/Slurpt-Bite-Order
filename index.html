<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Slurp & Bite POS</title>
    <style>
        :root { --p: #2d5a27; --a: #d35400; --bg: #f4f7f4; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: -apple-system, sans-serif; background: var(--bg); }
        header { background: var(--p); color: white; padding: 15px; text-align: center; font-weight: bold; position: sticky; top: 0; z-index: 1000; }
        .builder { background: #fff3e0; padding: 15px; border-bottom: 2px solid var(--a); position: sticky; top: 48px; z-index: 999; }
        #set-list { font-weight: bold; font-size: 14px; margin-bottom: 10px; color: #d35400; min-height: 20px; }
        .input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 10px; font-size: 16px; }
        .btn-add { width: 100%; background: var(--a); color: white; border: none; padding: 15px; border-radius: 8px; font-weight: bold; }
        .menu-wrap { padding: 10px; padding-bottom: 120px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .card { background: white; padding: 8px; border-radius: 12px; border: 1px solid #eee; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .card img { width: 100%; height: 90px; object-fit: cover; border-radius: 8px; background: #eee; }
        .footer { position: fixed; bottom: 0; width: 100%; background: white; border-top: 2px solid var(--p); padding: 15px; z-index: 1000; }
        .btn-pay { background: var(--p); color: white; border: none; padding: 12px 25px; border-radius: 8px; font-weight: bold; width: 100%; }
    </style>
</head>
<body>
<header>SLURP & BITE TAMAN ROSA</header>
<div class="builder">
    <div id="set-list">Pilih menu...</div>
    <input type="text" id="remark" class="input" placeholder="Nota (cth: Tak nak pedas)">
    <button class="btn-add" id="add-btn" onclick="simpanKeTroli()" disabled>TAMBAH SET KE TROLI</button>
</div>
<div class="menu-wrap"><div class="grid" id="menu-grid"></div></div>
<div class="footer">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
        <b style="color:var(--p)">Total: RM <span id="g-total">0.00</span></b>
        <button class="btn-pay" style="width:auto" onclick="buatBayaran()">BAYAR</button>
    </div>
</div>
<script>
    const items = [
        { n: 'Oden Original', p: 0.00, i: 'https://i.postimg.cc/jCxvWrQT/oden.jpg' },
        { n: 'Dry Pan Mee', p: 4.00, i: 'https://i.postimg.cc/Wt58gfXL/pan-mee.jpg' },
        { n: 'Indo Mee', p: 3.00, i: 'https://i.postimg.cc/dkBBWWFr/indo-mee.jpg' },
        { n: 'Mee Korean Cheese', p: 4.00, i: 'https://i.postimg.cc/5Q2mDwNJ/mee-sedap-cheese.jpg' },
        { n: 'Mee Korean Spicy', p: 4.00, i: 'https://i.postimg.cc/RJZT2cV4/mee-sedap-spicy.jpg' },
        { n: 'Chocolate Ice', p: 3.00, i: 'https://i.postimg.cc/bdyLGj0M/chocolate.png' },
        { n: 'Enoki', p: 1.00, i: 'https://i.postimg.cc/DW15GvMw/enoki.webp' },
        { n: 'Fucuk Ikan', p: 1.00, i: 'https://i.postimg.cc/S2qd7BBY/fucuk-ikan.jpg' },
        { n: 'Sosej', p: 1.00, i: 'https://i.postimg.cc/BtmpHwMJ/sosej.jpg' }
    ];
    let currentSet = [], cart = [];
    function renderItems() {
        const grid = document.getElementById('menu-grid');
        grid.innerHTML = items.map((item, idx) => `
            <div class="card" onclick="pilih(${idx})">
                <img src="${item.i}">
                <h4 style="font-size:12px; margin:8px 0;">${item.n}</h4>
                <p style="font-weight:bold; color:var(--p); margin:0;">RM ${item.p.toFixed(2)}</p>
            </div>`).join('');
    }
    function pilih(idx) {
        currentSet.push(items[idx]);
        document.getElementById('set-list').innerText = currentSet.map(x => x.n).join(' + ');
        document.getElementById('add-btn').disabled = false;
    }
    function simpanKeTroli() {
        const price = currentSet.reduce((a, b) => a + b.p, 0);
        cart.push({ desc: currentSet.map(x => x.n).join(', '), note: document.getElementById('remark').value, price: price });
        currentSet = []; document.getElementById('remark').value = '';
        document.getElementById('set-list').innerText = 'Set ditambah!';
        document.getElementById('add-btn').disabled = true;
        document.getElementById('g-total').innerText = cart.reduce((a, b) => a + b.price, 0).toFixed(2);
    }
    function buatBayaran() {
        if (!cart.length) return alert("Pilih menu!");
        const nama = prompt("Nama Pelanggan:");
        if (!nama) return;
        let msg = `*ORDER Slurp & Bite*\nPelanggan: ${nama}\n---\n`;
        cart.forEach((t, i) => msg += `${i+1}. ${t.desc}\nNota: ${t.note}\nRM ${t.price.toFixed(2)}\n\n`);
        msg += `---\n*TOTAL: RM ${document.getElementById('g-total').innerText}*`;
        window.location.href = `https://wa.me/60133002678?text=${encodeURIComponent(msg)}`;
    }
    window.onload = renderItems;
</script>
</body>
</html>
